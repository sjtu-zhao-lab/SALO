;buildInfoPackage: chisel3, version: 3.4.3, scalaVersion: 2.12.12, sbtVersion: 1.3.10
circuit PE : 
  module PE : 
    input clock : Clock
    input reset : UInt<1>
    output io : {flip in_q : Fixed<9><<4>>, flip in_sum : Fixed<18><<8>>, flip in_sum_exp : SInt<5>, flip in_kv : Fixed<9><<4>>, flip in_inv_sum_exp : SInt<5>, flip in_inv_sum : Fixed<9><<4>>, flip in_stage : UInt<3>, out_q : Fixed<9><<4>>, out_sum : Fixed<18><<8>>, out_sum_exp : SInt<5>, out_kv : Fixed<9><<4>>, out_stage : UInt<3>, out_acc : Fixed<18><<8>>}
    
    reg q : Fixed<9><<4>>, clock @[PE.scala 49:16]
    reg kv : Fixed<9><<4>>, clock @[PE.scala 50:17]
    reg sum : Fixed<18><<8>>, clock @[PE.scala 51:18]
    reg sum_exp : SInt<5>, clock @[PE.scala 52:22]
    reg stage : UInt<3>, clock @[PE.scala 53:20]
    q <= io.in_q @[PE.scala 55:7]
    kv <= io.in_kv @[PE.scala 56:8]
    stage <= io.in_stage @[PE.scala 57:11]
    io.out_q <= q @[PE.scala 59:14]
    io.out_kv <= kv @[PE.scala 60:15]
    io.out_sum <= sum @[PE.scala 61:16]
    io.out_sum_exp <= sum_exp @[PE.scala 62:20]
    io.out_stage <= stage @[PE.scala 63:18]
    reg reg_acc : Fixed<18><<8>>, clock @[PE.scala 65:22]
    io.out_acc <= reg_acc @[PE.scala 66:16]
    reg reg_prob : Fixed<18><<8>>, clock @[PE.scala 68:23]
    wire fraction_bits : Fixed<9><<4>> @[PE.scala 70:29]
    wire integer_bits : SInt<5> @[PE.scala 71:28]
    reg reg_max_exp : SInt<5>, clock @[PE.scala 73:26]
    wire max_exp : SInt<5> @[PE.scala 74:23]
    wire shifted_acc : Fixed<18><<8>> @[PE.scala 75:27]
    wire shifted_sum : Fixed<18><<8>> @[PE.scala 76:27]
    wire _lut_k_WIRE : Fixed<9><<4>>[4] @[PE.scala 80:32]
    _lut_k_WIRE[0] <= asFixedPoint(UInt<9>("h0c"), 4) @[PE.scala 80:32]
    _lut_k_WIRE[1] <= asFixedPoint(UInt<9>("h0e"), 4) @[PE.scala 80:32]
    _lut_k_WIRE[2] <= asFixedPoint(UInt<9>("h011"), 4) @[PE.scala 80:32]
    _lut_k_WIRE[3] <= asFixedPoint(UInt<9>("h014"), 4) @[PE.scala 80:32]
    reg lut_k : Fixed<9><<4>>[4], clock with : (reset => (reset, _lut_k_WIRE)) @[PE.scala 80:24]
    wire _lut_b_WIRE : Fixed<18><<8>>[4] @[PE.scala 81:32]
    _lut_b_WIRE[0] <= asFixedPoint(UInt<18>("h0ff"), 8) @[PE.scala 81:32]
    _lut_b_WIRE[1] <= asFixedPoint(UInt<18>("h0f6"), 8) @[PE.scala 81:32]
    _lut_b_WIRE[2] <= asFixedPoint(UInt<18>("h0e1"), 8) @[PE.scala 81:32]
    _lut_b_WIRE[3] <= asFixedPoint(UInt<18>("h0b9"), 8) @[PE.scala 81:32]
    reg lut_b : Fixed<18><<8>>[4], clock with : (reset => (reset, _lut_b_WIRE)) @[PE.scala 81:24]
    wire k : Fixed<9><<4>> @[PE.scala 83:17]
    wire b : Fixed<18><<8>> @[PE.scala 84:17]
    node _integer_bits_T = bits(reg_acc, 15, 11) @[PE.scala 86:28]
    node _integer_bits_T_1 = asSInt(_integer_bits_T) @[PE.scala 86:43]
    integer_bits <= _integer_bits_T_1 @[PE.scala 86:18]
    node _fraction_bits_T = bits(reg_acc, 10, 3) @[PE.scala 87:29]
    node _fraction_bits_T_1 = cvt(_fraction_bits_T) @[PE.scala 87:41]
    node _fraction_bits_T_2 = asFixedPoint(_fraction_bits_T_1, 4) @[PE.scala 87:56]
    fraction_bits <= _fraction_bits_T_2 @[PE.scala 87:19]
    node _k_T = bits(fraction_bits, 7, 6) @[PE.scala 88:29]
    k <= lut_k[_k_T] @[PE.scala 88:7]
    node _b_T = bits(fraction_bits, 7, 6) @[PE.scala 89:29]
    b <= lut_b[_b_T] @[PE.scala 89:7]
    wire oprand1 : Fixed<9><<4>> @[PE.scala 94:23]
    wire oprand2 : Fixed<9><<4>> @[PE.scala 95:23]
    wire oprand3 : Fixed<18><<8>> @[PE.scala 96:23]
    wire product : Fixed<18><<8>> @[PE.scala 97:23]
    wire oprand4 : Fixed<18><<8>> @[PE.scala 98:23]
    wire result : Fixed<18><<8>> @[PE.scala 99:22]
    node oprand1_shifted = setp(reg_acc, 4) @[Arithmetic.scala 38:50]
    node _oprand1_T = bits(oprand1_shifted, 8, 0) @[Arithmetic.scala 40:24]
    node _oprand1_T_1 = asFixedPoint(_oprand1_T, 4) @[Arithmetic.scala 40:56]
    node _oprand1_T_2 = gt(reg_acc, asFixedPoint(UInt<13>("h0ff0"), 4)) @[Arithmetic.scala 47:56]
    node _oprand1_T_3 = lt(reg_acc, asFixedPoint(UInt<13>("h01000"), 4)) @[Arithmetic.scala 47:83]
    node _oprand1_T_4 = mux(_oprand1_T_3, asFixedPoint(UInt<13>("h01000"), 4), _oprand1_T_1) @[Mux.scala 98:16]
    node _oprand1_T_5 = mux(_oprand1_T_2, asFixedPoint(UInt<13>("h0ff0"), 4), _oprand1_T_4) @[Mux.scala 98:16]
    node _oprand1_T_6 = eq(UInt<1>("h00"), io.in_stage) @[Mux.scala 80:60]
    wire _oprand1_WIRE : Fixed<9><<4>> @[Mux.scala 80:57]
    _oprand1_WIRE is invalid @[Mux.scala 80:57]
    node _oprand1_T_7 = mux(_oprand1_T_6, io.in_q, _oprand1_WIRE) @[Mux.scala 80:57]
    node _oprand1_T_8 = eq(UInt<1>("h01"), io.in_stage) @[Mux.scala 80:60]
    node _oprand1_T_9 = mux(_oprand1_T_8, k, _oprand1_T_7) @[Mux.scala 80:57]
    node _oprand1_T_10 = eq(UInt<2>("h03"), io.in_stage) @[Mux.scala 80:60]
    node _oprand1_T_11 = mux(_oprand1_T_10, _oprand1_T_5, _oprand1_T_9) @[Mux.scala 80:57]
    node _oprand1_T_12 = eq(UInt<3>("h04"), io.in_stage) @[Mux.scala 80:60]
    node _oprand1_T_13 = mux(_oprand1_T_12, reg_prob, _oprand1_T_11) @[Mux.scala 80:57]
    oprand1 <= _oprand1_T_13 @[PE.scala 101:13]
    node _oprand2_T = eq(UInt<1>("h00"), io.in_stage) @[Mux.scala 80:60]
    wire _oprand2_WIRE : Fixed<9><<4>> @[Mux.scala 80:57]
    _oprand2_WIRE is invalid @[Mux.scala 80:57]
    node _oprand2_T_1 = mux(_oprand2_T, io.in_kv, _oprand2_WIRE) @[Mux.scala 80:57]
    node _oprand2_T_2 = eq(UInt<1>("h01"), io.in_stage) @[Mux.scala 80:60]
    node _oprand2_T_3 = mux(_oprand2_T_2, fraction_bits, _oprand2_T_1) @[Mux.scala 80:57]
    node _oprand2_T_4 = eq(UInt<2>("h03"), io.in_stage) @[Mux.scala 80:60]
    node _oprand2_T_5 = mux(_oprand2_T_4, io.in_inv_sum, _oprand2_T_3) @[Mux.scala 80:57]
    node _oprand2_T_6 = eq(UInt<3>("h04"), io.in_stage) @[Mux.scala 80:60]
    node _oprand2_T_7 = mux(_oprand2_T_6, io.in_kv, _oprand2_T_5) @[Mux.scala 80:57]
    oprand2 <= _oprand2_T_7 @[PE.scala 102:13]
    node _oprand3_T = eq(UInt<1>("h00"), io.in_stage) @[Mux.scala 80:60]
    wire _oprand3_WIRE : Fixed<18><<8>> @[Mux.scala 80:57]
    _oprand3_WIRE is invalid @[Mux.scala 80:57]
    node _oprand3_T_1 = mux(_oprand3_T, reg_acc, _oprand3_WIRE) @[Mux.scala 80:57]
    node _oprand3_T_2 = eq(UInt<1>("h01"), io.in_stage) @[Mux.scala 80:60]
    node _oprand3_T_3 = mux(_oprand3_T_2, b, _oprand3_T_1) @[Mux.scala 80:57]
    node _oprand3_T_4 = eq(UInt<2>("h02"), io.in_stage) @[Mux.scala 80:60]
    node _oprand3_T_5 = mux(_oprand3_T_4, shifted_sum, _oprand3_T_3) @[Mux.scala 80:57]
    node _oprand3_T_6 = eq(UInt<2>("h03"), io.in_stage) @[Mux.scala 80:60]
    node _oprand3_T_7 = mux(_oprand3_T_6, asFixedPoint(UInt<18>("h00"), 8), _oprand3_T_5) @[Mux.scala 80:57]
    node _oprand3_T_8 = eq(UInt<3>("h04"), io.in_stage) @[Mux.scala 80:60]
    node _oprand3_T_9 = mux(_oprand3_T_8, io.in_sum, _oprand3_T_7) @[Mux.scala 80:57]
    oprand3 <= _oprand3_T_9 @[PE.scala 103:13]
    node _product_T = eq(io.in_stage, UInt<2>("h02")) @[PE.scala 105:31]
    node _product_T_1 = mul(oprand1, oprand2) @[PE.scala 105:60]
    node _product_T_2 = mux(_product_T, shifted_acc, _product_T_1) @[PE.scala 105:19]
    product <= _product_T_2 @[PE.scala 105:13]
    node _oprand4_T = eq(io.in_stage, UInt<3>("h04")) @[PE.scala 106:31]
    node _oprand4_T_1 = shr(product, 3) @[PE.scala 106:47]
    node _oprand4_T_2 = eq(io.in_stage, UInt<1>("h01")) @[PE.scala 106:68]
    node _oprand4_T_3 = shr(product, 4) @[PE.scala 106:84]
    node _oprand4_T_4 = mux(_oprand4_T_2, _oprand4_T_3, product) @[PE.scala 106:56]
    node _oprand4_T_5 = mux(_oprand4_T, _oprand4_T_1, _oprand4_T_4) @[PE.scala 106:19]
    oprand4 <= _oprand4_T_5 @[PE.scala 106:13]
    node _result_T = add(oprand3, oprand4) @[PE.scala 107:23]
    node _result_T_1 = tail(_result_T, 1) @[PE.scala 107:23]
    node _result_T_2 = asFixedPoint(_result_T_1, 8) @[PE.scala 107:23]
    result <= _result_T_2 @[PE.scala 107:12]
    shifted_acc is invalid @[PE.scala 109:17]
    shifted_sum is invalid @[PE.scala 110:17]
    max_exp is invalid @[PE.scala 111:13]
    node _T = eq(io.in_stage, UInt<1>("h00")) @[PE.scala 113:21]
    when _T : @[PE.scala 113:29]
      reg_acc <= result @[PE.scala 114:17]
      reg_prob is invalid @[PE.scala 115:18]
      reg_max_exp is invalid @[PE.scala 116:21]
      sum is invalid @[PE.scala 117:13]
      sum_exp is invalid @[PE.scala 118:17]
      skip @[PE.scala 113:29]
    else : @[PE.scala 119:35]
      node _T_1 = eq(io.in_stage, UInt<1>("h01")) @[PE.scala 119:27]
      when _T_1 : @[PE.scala 119:35]
        reg_acc <= result @[PE.scala 120:17]
        reg_prob is invalid @[PE.scala 121:18]
        reg_max_exp <= integer_bits @[PE.scala 122:21]
        sum is invalid @[PE.scala 123:13]
        sum_exp is invalid @[PE.scala 124:17]
        skip @[PE.scala 119:35]
      else : @[PE.scala 125:35]
        node _T_2 = eq(io.in_stage, UInt<2>("h02")) @[PE.scala 125:27]
        when _T_2 : @[PE.scala 125:35]
          node _T_3 = lt(reg_max_exp, io.in_sum_exp) @[PE.scala 126:26]
          when _T_3 : @[PE.scala 126:43]
            node _shifted_acc_T = sub(io.in_sum_exp, reg_max_exp) @[PE.scala 127:54]
            node _shifted_acc_T_1 = tail(_shifted_acc_T, 1) @[PE.scala 127:54]
            node _shifted_acc_T_2 = asSInt(_shifted_acc_T_1) @[PE.scala 127:54]
            node _shifted_acc_T_3 = asUInt(_shifted_acc_T_2) @[PE.scala 127:75]
            node _shifted_acc_T_4 = dshr(reg_acc, _shifted_acc_T_3) @[PE.scala 127:36]
            shifted_acc <= _shifted_acc_T_4 @[PE.scala 127:25]
            shifted_sum <= io.in_sum @[PE.scala 128:25]
            max_exp <= io.in_sum_exp @[PE.scala 129:21]
            skip @[PE.scala 126:43]
          else : @[PE.scala 130:21]
            shifted_acc <= reg_acc @[PE.scala 131:25]
            node _shifted_sum_T = sub(reg_max_exp, io.in_sum_exp) @[PE.scala 132:54]
            node _shifted_sum_T_1 = tail(_shifted_sum_T, 1) @[PE.scala 132:54]
            node _shifted_sum_T_2 = asSInt(_shifted_sum_T_1) @[PE.scala 132:54]
            node _shifted_sum_T_3 = asUInt(_shifted_sum_T_2) @[PE.scala 132:77]
            node _shifted_sum_T_4 = dshr(io.in_sum, _shifted_sum_T_3) @[PE.scala 132:38]
            shifted_sum <= _shifted_sum_T_4 @[PE.scala 132:25]
            max_exp <= reg_max_exp @[PE.scala 133:21]
            skip @[PE.scala 130:21]
          reg_acc <= shifted_acc @[PE.scala 135:17]
          reg_prob is invalid @[PE.scala 136:18]
          reg_max_exp <= max_exp @[PE.scala 137:21]
          sum <= result @[PE.scala 138:13]
          sum_exp <= max_exp @[PE.scala 139:17]
          skip @[PE.scala 125:35]
        else : @[PE.scala 140:35]
          node _T_4 = eq(io.in_stage, UInt<2>("h03")) @[PE.scala 140:27]
          when _T_4 : @[PE.scala 140:35]
            reg_acc <= reg_acc @[PE.scala 141:17]
            node _reg_prob_T = sub(io.in_inv_sum_exp, reg_max_exp) @[PE.scala 142:51]
            node _reg_prob_T_1 = tail(_reg_prob_T, 1) @[PE.scala 142:51]
            node _reg_prob_T_2 = asSInt(_reg_prob_T_1) @[PE.scala 142:51]
            node _reg_prob_T_3 = asUInt(_reg_prob_T_2) @[PE.scala 142:72]
            node _reg_prob_T_4 = dshr(result, _reg_prob_T_3) @[PE.scala 142:29]
            node reg_prob_shifted = setp(_reg_prob_T_4, 4) @[Arithmetic.scala 38:50]
            node _reg_prob_T_5 = bits(reg_prob_shifted, 8, 0) @[Arithmetic.scala 40:24]
            node _reg_prob_T_6 = asFixedPoint(_reg_prob_T_5, 4) @[Arithmetic.scala 40:56]
            node _reg_prob_T_7 = gt(_reg_prob_T_4, asFixedPoint(UInt<13>("h0ff0"), 4)) @[Arithmetic.scala 47:56]
            node _reg_prob_T_8 = lt(_reg_prob_T_4, asFixedPoint(UInt<13>("h01000"), 4)) @[Arithmetic.scala 47:83]
            node _reg_prob_T_9 = mux(_reg_prob_T_8, asFixedPoint(UInt<13>("h01000"), 4), _reg_prob_T_6) @[Mux.scala 98:16]
            node _reg_prob_T_10 = mux(_reg_prob_T_7, asFixedPoint(UInt<13>("h0ff0"), 4), _reg_prob_T_9) @[Mux.scala 98:16]
            reg_prob <= _reg_prob_T_10 @[PE.scala 142:18]
            reg_max_exp <= reg_max_exp @[PE.scala 143:21]
            sum is invalid @[PE.scala 144:13]
            sum_exp is invalid @[PE.scala 145:17]
            skip @[PE.scala 140:35]
          else : @[PE.scala 146:35]
            node _T_5 = eq(io.in_stage, UInt<3>("h04")) @[PE.scala 146:27]
            when _T_5 : @[PE.scala 146:35]
              reg_acc is invalid @[PE.scala 147:17]
              reg_prob <= reg_prob @[PE.scala 148:18]
              reg_max_exp is invalid @[PE.scala 149:21]
              sum <= result @[PE.scala 150:13]
              sum_exp is invalid @[PE.scala 151:17]
              skip @[PE.scala 146:35]
    
